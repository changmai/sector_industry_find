@echo off
chcp 65001 >nul
REM ================================================================================
REM   [시뮬레이션 11] 전체 조건 MODE 1 테스트 (2025년 11월)
REM ================================================================================
REM
REM   테스트 목적:
REM   --------------------------------------------------------------------------
REM   모든 사용 가능한 조건(15개)의 2~3개 조합을 테스트하여
REM   유망한 조합을 탐색합니다.
REM
REM   테스트 기간:
REM   --------------------------------------------------------------------------
REM   - 시작: 2025년 11월 3일
REM   - 종료: 2025년 11월 17일
REM   - 약 10 거래일
REM
REM   사용 조건 (15개):
REM   --------------------------------------------------------------------------
REM   [기본 조건 9개]
REM   - A: 섹터+업종 연속 상승 (모멘텀)
REM   - B: 60일 신고거래대금 (거래량)
REM   - C: 회전율 상위 종목 (유동성)
REM   - D: 이평선 정배열 (추세)
REM   - E: 신고가 근접 (돌파 임박)
REM   - F: 거래량 급증 (관심 증가)
REM   - G: 회전율 범위 (적정 거래)
REM   - H: 눌림목 패턴 (조정 매수)
REM   - I: 급등주 조정 (모멘텀)
REM
REM   [GT 조건 6개]
REM   - GT_A: MACD 골든크로스
REM   - GT_B: RSI 매수 신호
REM   - GT_C: RSI 과매수 아님
REM   - GT_D: 바닥 패턴
REM   - GT_D2: 변동성 축소
REM   - GT_E: 이평선 수렴
REM   - GT_F: 거래량 급증
REM
REM   [제외된 조건]
REM   - GT_P1: target_themes 설정 필요
REM   - GT_M1, GT_M2: market 설정 필요
REM
REM   조합 규모:
REM   --------------------------------------------------------------------------
REM   - 최소 조합: 2개
REM   - 최대 조합: 3개
REM   - 예상 조합 수: C(15,2) + C(15,3) = 105 + 455 = 560개
REM   - (4개 조합 포함시 1,925개로 시간이 너무 오래 걸림)
REM
REM   TP/SL 설정:
REM   --------------------------------------------------------------------------
REM   - 익절: +10%
REM   - 손절: -5%
REM   - 최대 보유: 14일
REM
REM   병렬 처리:
REM   --------------------------------------------------------------------------
REM   - workers=0: CPU 코어 수만큼 자동 병렬 처리
REM
REM   예상 소요시간: 약 30분~1시간
REM ================================================================================

cd /d "%~dp0.."

python combination_tester.py ^
    --conditions A,B,C,D,E,F,G,H,I,GT_A,GT_B,GT_C,GT_D,GT_D2,GT_E,GT_F ^
    --start-date 20250401 ^
    --end-date 20250630 ^
    --tp 10 ^
    --sl -5 ^
    --max-holding 14 ^
    --min-trades 10 ^
    --min-size 2 ^
    --max-size 3 ^
    --sort-by avg_return ^
    --top 50 ^
    --workers 4 ^
    --log

echo.
echo ================================================================================
echo   테스트 완료
echo ================================================================================
echo   결과는 logs 폴더에 저장되었습니다.
echo   유망한 조합을 선별하여 MODE 2, 3, 4 추가 테스트를 진행하세요.
echo ================================================================================

pause
